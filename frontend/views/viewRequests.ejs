<link rel="stylesheet" href="/requestsPage.css">
<%- include('sellerHeader.ejs') %>

<div class="body">
    <div id="main">
        <h2>View Your Requests Here</h2>
        <div class="box" id="requestBox">
            <!-- Demo request (example) -->
            <!-- <div class="request">
                <div>From User</div>
                <div class="actions">
                    <button>Accept</button>
                    <button>Reject</button>
                </div>
            </div> -->
        </div>
    </div>
</div>
    <script>
        // Simulated API response
        const mockApiData = [
            { from: "Alice" },
            { from: "Bob" },
            { from: "Charlie" }
        ];

        function populateRequests(data) {
            const box = document.getElementById("requestBox");
            box.innerHTML = "";

            data.forEach(item => {
                //Creating main request container
                const requestDiv = document.createElement("div");
                requestDiv.className = "request";

                // Create "from user" text
                const fromDiv = document.createElement("div");
                fromDiv.textContent = `From ${item.from}`;

                // Create actions div
                const actionsDiv = document.createElement("div");
                actionsDiv.className = "actions";

                // Accept button
                const acceptBtn = document.createElement("button");
                acceptBtn.textContent = "Accept";
                acceptBtn.onclick = () => alert(`Accepted ${item.from}`);

                // Reject button
                const rejectBtn = document.createElement("button");
                rejectBtn.textContent = "Reject";
                rejectBtn.onclick = () => alert(`Rejected ${item.from}`);

                // Append buttons into actions
                actionsDiv.appendChild(acceptBtn);
                actionsDiv.appendChild(rejectBtn);

                // Append fromDiv and actions into requestDiv
                requestDiv.appendChild(fromDiv);
                requestDiv.appendChild(actionsDiv);

                // Append requestDiv into box
                box.appendChild(requestDiv);
            });
        }

        // Simulate API call
        function fetchRequests() {
            // Here you'd normally use fetch(...)
            // fetch("api/endpoint").then(...)
            populateRequests(mockApiData);
        }

        // Call on page load
        fetchRequests();
    </script>